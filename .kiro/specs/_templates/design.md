---
title: [機能名] - 設計書
feature: [feature-name]
status: draft
created: YYYY-MM-DD
updated: YYYY-MM-DD
---

# [機能名] - 設計書

## 概要

[機能の設計概要を2-3文で説明]

設計の主要な方針：
- [方針1]
- [方針2]
- [方針3]

## アーキテクチャ

```
┌─────────────────────────────────────────────────────────┐
│                    [コンポーネント名]                     │
│                                                          │
│  ┌──────────────────┐      ┌──────────────────┐        │
│  │  [サブコンポーネント] │      │  [サブコンポーネント] │        │
│  └──────────────────┘      └──────────────────┘        │
└─────────────────────────────────────────────────────────┘
                       │
                       │ [関係性]
                       ▼
              ┌─────────────────┐
              │  [外部システム]  │
              └─────────────────┘
```

[アーキテクチャ図の説明]

## コンポーネントとインターフェース

### 1. [コンポーネント名]

[コンポーネントの説明]

```python
def function_name(
    param1: type,
    param2: type
) -> return_type:
    """
    [関数の説明]
    
    Args:
        param1: [説明]
        param2: [説明]
        
    Returns:
        return_type: [説明]
    """
    pass
```

### 2. [コンポーネント名]

[コンポーネントの説明]

```python
def function_name(
    param1: type,
    param2: type
) -> return_type:
    """
    [関数の説明]
    
    Args:
        param1: [説明]
        param2: [説明]
        
    Returns:
        return_type: [説明]
    """
    pass
```

## データモデル

### [データ構造名]

```json
{
  "field1": "value1",
  "field2": 123,
  "field3": true
}
```

フィールド定義：
- `field1` (string): [説明]
- `field2` (int): [説明]
- `field3` (bool): [説明]

## 正確性プロパティ

*プロパティとは、システムの全ての有効な実行において真であるべき特性や振る舞いのことです。本質的には、システムが何をすべきかについての形式的な記述です。プロパティは、人間が読める仕様と機械で検証可能な正確性保証との橋渡しをします。*

### プロパティ1: [プロパティ名]
*任意の*[条件]について、[期待される振る舞い]
**検証対象: 要件 AC-XXX.X**

### プロパティ2: [プロパティ名]
*任意の*[条件]について、[期待される振る舞い]
**検証対象: 要件 AC-XXX.X**

### プロパティ3: [プロパティ名]
*任意の*[条件]について、[期待される振る舞い]
**検証対象: 要件 AC-XXX.X**

## エラーハンドリング

### [エラーカテゴリ1]

1. **[エラーケース名]**
   - 原因: [原因の説明]
   - 対応: [対応方法]

2. **[エラーケース名]**
   - 原因: [原因の説明]
   - 対応: [対応方法]

### [エラーカテゴリ2]

1. **[エラーケース名]**
   - 原因: [原因の説明]
   - 対応: [対応方法]

## テスト戦略

### ユニットテスト

Pythonの標準`unittest`フレームワークを使用します。

**テスト対象:**
- `function1()`: 正常系、エラー系
- `function2()`: 正常系、エラー系

**テストファイル:** `tests/test_[module_name].py`

### プロパティベーステスト

Pythonの`hypothesis`ライブラリを使用します。

**設定:**
- 最小実行回数: 100回
- タイムアウト: テストごとに30秒

**テスト対象:**
- プロパティ1: [プロパティ名]
- プロパティ2: [プロパティ名]
- プロパティ3: [プロパティ名]

**テストファイル:** `tests/test_[module_name]_properties.py`

### 統合テスト

**テストシナリオ:**
1. [シナリオ1の説明]
2. [シナリオ2の説明]
3. [シナリオ3の説明]

**テストファイル:** `tests/test_[module_name]_integration.py`

### 手動テスト

**確認項目:**
1. [確認項目1]
2. [確認項目2]
3. [確認項目3]

---

## テンプレート使用ガイド

### Front Matter（必須）
- `title`: 機能名と「設計書」を含める
- `feature`: requirements.mdと同じ値を使用
- `status`: draft / in-progress / implemented / deprecated
- `created`: 作成日（YYYY-MM-DD形式）
- `updated`: 最終更新日（YYYY-MM-DD形式）

### 概要セクション
- 設計の主要な方針を3-5個箇条書き
- 技術的な判断の理由を明確に

### アーキテクチャ
- ASCII図でコンポーネント間の関係を表現
- データフローを矢印で示す
- 既存システムとの統合点を明示

### コンポーネントとインターフェース
- 各コンポーネントの責務を明確に
- 関数シグネチャをPythonコードで記述
- docstringで引数と戻り値を説明

### 正確性プロパティ
- 最低3つのプロパティを定義
- 各プロパティは「任意の」で始める
- 検証対象の要件（AC-XXX）を明記

### テスト戦略
- ユニットテスト、プロパティテスト、統合テストを全て含める
- テストファイル名を明記
- プロパティテストの設定（実行回数、タイムアウト）を記載

### 品質チェックリスト
- [ ] Front Matterが全て記入されている
- [ ] アーキテクチャ図が含まれている
- [ ] 最低2つのコンポーネントが定義されている
- [ ] 各コンポーネントに関数シグネチャがある
- [ ] データモデルがJSON形式で定義されている
- [ ] 正確性プロパティが最低3つ定義されている
- [ ] 各プロパティに検証対象の要件が明記されている
- [ ] テスト戦略が3種類（ユニット、プロパティ、統合）含まれている
- [ ] テストファイル名が明記されている
