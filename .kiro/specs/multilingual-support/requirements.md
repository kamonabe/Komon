---
title: Multilingual Support for Komon Notifications
feature: multilingual-support
status: draft
created: 2025-12-19
updated: 2025-12-19
---

# 多言語化対応 - 要件定義

## 概要

Komonの通知・表示メッセージを多言語対応し、日本語以外のユーザーでも利用できるようにする。

## 背景・課題

### 現在の状況
- 全ての通知メッセージが日本語のみ
- 設定ファイルは英語キー使用
- コード・コメントは英語で記述
- README は日英両対応済み

### 課題
- 国際的なユーザーが利用しにくい
- オープンソースとしての汎用性が限定的
- 「やさしい口調」の特徴が日本語でしか表現できない

### 解決したい問題
- 英語圏ユーザーの利用障壁を下げる
- 将来的な他言語対応の基盤を作る
- Komonの特徴的な「やさしい通知」を多言語で実現

## 受入基準

### AC-001: 言語設定機能
**WHEN** ユーザーが設定ファイルで言語を指定する  
**THEN** 指定した言語で通知メッセージが表示される

**詳細**:
- `settings.yml` の `general.language` で言語を指定
- 対応言語: `ja` (日本語), `en` (英語)
- デフォルトは日本語 (`ja`)
- 無効な言語コードの場合は日本語にフォールバック

### AC-002: 日本語メッセージの完全対応
**WHEN** 言語設定が日本語 (`ja`) の場合  
**THEN** 全ての通知メッセージが現在と同じ日本語で表示される

**詳細**:
- 既存の日本語メッセージを全て保持
- 「やさしい口調」の特徴を維持
- 絵文字の使用も継続
- 既存ユーザーへの影響なし

### AC-003: 英語メッセージの提供
**WHEN** 言語設定が英語 (`en`) の場合  
**THEN** 全ての通知メッセージが適切な英語で表示される

**詳細**:
- 技術的すぎない、親しみやすい英語表現
- 日本語の「やさしい口調」に相当する表現
- 絵文字は継続使用
- 変数埋め込み（使用率等）の正常動作

### AC-004: メッセージテンプレートシステム
**WHEN** 新しい通知メッセージを追加する場合  
**THEN** 言語ファイルに追加するだけで多言語対応できる

**詳細**:
- メッセージキーによる管理
- 変数埋め込み機能（`{usage}%` 等）
- 言語ファイルの構造化
- 開発者にとって使いやすいAPI

### AC-005: フォールバック機能
**WHEN** 指定言語にメッセージが存在しない場合  
**THEN** 日本語メッセージが表示される

**詳細**:
- 翻訳漏れがあっても動作継続
- ログに警告メッセージを出力
- ユーザーには日本語で通知
- システムの安定性を優先

### AC-006: 既存機能への影響なし
**WHEN** 多言語化機能を導入する場合  
**THEN** 既存の全ての機能が正常に動作する

**詳細**:
- 設定ファイルの後方互換性
- 既存のテストが全てパス
- パフォーマンスへの影響最小限
- 既存ユーザーの設定変更不要

## 対象範囲

### 対象メッセージ
- **CPU使用率警告**: 「CPUが頑張りすぎてるみたいです」等
- **メモリ使用率警告**: 「メモリ使用率が高めです」等
- **ディスク使用率警告**: 「ディスク使用率が気になります」等
- **プロセス情報**: コンテキスト型アドバイス
- **週次レポート**: 健全性レポートメッセージ
- **ログ分析結果**: ログ急増・傾向分析の通知
- **ネットワーク疎通**: ping/http チェック結果
- **システム状態**: `komon advise` の出力メッセージ

### 対象言語（初期）
- **日本語** (`ja`): 既存メッセージを維持
- **英語** (`en`): 新規追加

### 将来拡張予定
- 中国語 (`zh`)
- 韓国語 (`ko`)
- その他の言語（コミュニティ貢献）

## 非機能要件

### パフォーマンス
- メッセージ取得のオーバーヘッド: 1ms以下
- メモリ使用量増加: 1MB以下
- 起動時間への影響: 50ms以下

### 保守性
- 新しい言語の追加が容易
- メッセージの追加・変更が簡単
- 翻訳の品質管理が可能

### 拡張性
- プラグイン形式での言語追加
- 外部翻訳ファイルの読み込み
- 動的な言語切り替え（将来）

## 制約・前提条件

### 技術的制約
- Python 3.10+ での動作
- 既存の依存関係を増やさない
- 軽量性を維持（追加依存なし）

### 運用制約
- 既存ユーザーの設定変更を強制しない
- 段階的なリリースが可能
- ロールバックが容易

### 品質制約
- テストカバレッジ90%以上を維持
- 全ての既存テストがパス
- 新機能のテストを追加

## 成功指標

### 定量指標
- 英語圏からのGitHub Star数の増加
- 英語での Issue/PR の投稿数
- ダウンロード数の地域別分析

### 定性指標
- 英語圏ユーザーからのポジティブフィードバック
- 翻訳品質に関する評価
- コミュニティからの翻訳貢献

## リスク・課題

### 翻訳品質のリスク
- **リスク**: 「やさしい口調」の英語表現が困難
- **対策**: ネイティブスピーカーによるレビュー
- **軽減策**: コミュニティからのフィードバック収集

### 保守コストの増加
- **リスク**: 言語数に比例してメンテナンス工数が増加
- **対策**: 翻訳管理ツールの検討
- **軽減策**: コミュニティ主導の翻訳体制

### 既存機能への影響
- **リスク**: リファクタリングによる既存機能の破綻
- **対策**: 段階的な実装とテスト
- **軽減策**: 既存テストの充実

## 参考情報

### 類似プロジェクトの調査
- **htop**: 多言語対応の軽量監視ツール
- **neofetch**: シンプルな多言語対応
- **bat**: Rust製ツールの国際化事例

### 技術選択肢
- **gettext**: 標準的だが重い
- **独自実装**: 軽量だが車輪の再発明
- **YAML/JSON**: シンプルで軽量（採用予定）

### 翻訳方針
- 機械翻訳は使用しない
- 技術用語は統一する
- 文化的な表現は各言語に適応