metadata:
  title: ディスク使用量の増加トレンド予測 - 実装タスク
  feature: disk-trend-prediction
  status: completed
  created: 2025-11-23
  updated: 2025-11-26
tasks:
- id: T1
  title: "disk_predictor.pyモジュールの基本構造を作成\n\n\n  - `src/komon/disk_predictor.py` を新規作成\n\
    \  - 必要なインポート文を追加\n  - 定数定義（HISTORY_DIR等）\n  - _要件: AC-001_"
  status: done
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
- id: T2
  title: "データ読み込み機能を実装\n\n  - [x] 2.1 `load_disk_history()` 関数を実装\n\n\n    - `data/usage_history/`\
    \ からCSVファイルを読み込み\n    - 過去N日分のデータをフィルタリング\n    - エラーハンドリング（ファイルなし、読み込みエラー）\n \
    \   - _要件: AC-001_\n  \n  - [x] 2.2 `calculate_daily_average()` 関数を実装\n\n\n    - 時系列データを日付でグループ化\n\
    \    - 各日の平均値を計算\n    - _要件: AC-001_\n  \n  - [x] 2.3 データ読み込みのプロパティテストを作成\n\
    \n\n    - **Property 1: 日次平均計算の正確性**\n    - **検証要件: AC-001**\n  \n  - [x] 2.4 データ読み込みのプロパティテストを作成\n\
    \n\n    - **Property 2: 欠損データの処理**\n    - **検証要件: AC-001**\n  \n  - [x] 2.5 データ読み込みのユニットテストを作成\n\
    \n\n    - データ不足のケース\n    - 不正なデータのケース\n    - ファイルが存在しないケース\n    - _要件: AC-001_"
  status: done
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
- id: T3
  title: "予測ロジックを実装\n  - [x] 3.1 `predict_disk_trend()` 関数を実装\n\n\n    - 最小二乗法で傾きと切片を計算\n\
    \    - 90%到達予測日を計算\n    - トレンド判定（increasing/stable/decreasing）\n    - _要件: AC-002_\n\
    \  \n  - [x] 3.2 線形回帰のプロパティテストを作成\n\n\n    - **Property 3: 線形回帰の正確性**\n    -\
    \ **検証要件: AC-002**\n  \n  - [x] 3.3 90%到達予測のプロパティテストを作成\n\n\n    - **Property 4:\
    \ 90%到達予測の正確性**\n    - **検証要件: AC-002**\n  \n  - [x] 3.4 予測ロジックのユニットテストを作成\n\n\n\
    \    - 全て同一値のケース\n    - 傾きがゼロまたは負のケース\n    - 既に90%以上のケース\n    - 予測日が100年以上先のケース\n\
    \    - _要件: AC-002_"
  status: todo
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
- id: T4
  title: "急激な変化検出を実装\n  - [x] 4.1 `detect_rapid_change()` 関数を実装\n\n\n    - 前日比を計算\n\
    \    - 10%以上の増加を検出\n    - _要件: AC-003_\n  \n  - [x] 4.2 前日比計算のプロパティテストを作成\n\n\
    \n    - **Property 5: 前日比計算の正確性**\n    - **検証要件: AC-003**\n  \n  - [x] 4.3 急激な変化検出のプロパティテストを作成\n\
    \n\n    - **Property 6: 急激な変化検出の正確性**\n    - **検証要件: AC-003**\n  \n  - [x] 4.4 急激な変化検出のユニットテストを作成\n\
    \n\n    - 減少傾向のケース\n    - 前日データなしのケース\n\n    - _要件: AC-003_"
  status: todo
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
- id: T5
  title: "メッセージ生成を実装\n  - [x] 5.1 `format_prediction_message()` 関数を実装\n\n\n    - 急激な変化\
    \ + 90%到達予測のパターン\n    - 急激な変化のみのパターン\n    - 通常の増加 + 90%到達予測のパターン\n    - 安全な状態のパターン\n\
    \    - 推奨アクションの生成\n    - _要件: AC-004_\n  \n  - [x] 5.2 メッセージ生成のプロパティテストを作成\n\n\
    \n    - **Property 7: 予測メッセージの完全性**\n    - **検証要件: AC-004**\n  \n  - [x] 5.3 メッセージ生成のプロパティテストを作成\n\
    \n\n    - **Property 8: 警告の優先度順表示**\n    - **検証要件: AC-005**\n  \n  - [x] 5.4 メッセージ生成のユニットテストを作成\n\
    \n\n    - 安全な状態のメッセージ\n    - 各パターンのメッセージ形式\n    - _要件: AC-004_"
  status: todo
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
- id: T6
  title: "Checkpoint - 基本機能のテスト確認\n\n\n\n\n  - 全てのテストがパスすることを確認\n  - ユーザーに質問があれば確認"
  status: done
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
- id: T7
  title: "advise.pyへの統合\n  - [x] 7.1 `advise_disk_prediction()` 関数を追加\n\n\n    - disk_predictorモジュールをインポート\n\
    \    - データ読み込み → 予測計算 → メッセージ生成 → 表示\n    - エラーハンドリング\n    - _要件: AC-005_\n \
    \ \n  - [x] 7.2 `run_advise()` 関数に統合\n\n\n    - `advise_disk_prediction()` を呼び出し\n \
    \   - 適切な位置に配置（ログ傾向分析の後）\n    - _要件: AC-005_\n  \n\n\n\n\n  - [x] 7.3 advise統合の統合テストを作成\n\
    \    - 予測結果が表示されることを確認\n    - データ不足時のメッセージを確認\n    - エラー時の動作を確認\n\n\n    - _要件:\
    \ AC-005_"
  status: todo
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
- id: T8
  title: "weekly_report.pyへの統合\n  - [x] 8.1 `collect_weekly_data()` 関数を拡張\n\n\n  \
    \  - disk_predictorモジュールをインポート\n    - 予測結果を辞書に追加\n\n\n\n    - エラーハンドリング\n\n\n\
    \    - _要件: AC-006_\n\n\n\n\n\n\n  \n  - [x] 8.2 `report_formatter.py` に予測セクションを追加\n\
    \n\n    - `format_disk_prediction()` 関数を実装\n\n\n\n\n\n    - 警告がある場合の目立つ表示\n  \
    \  - 安全な場合の簡潔な表示\n\n\n    - _要件: AC-006_\n  \n\n\n  - [x] 8.3 週次レポート統合の統合テストを作成\n\
    \    - 予測結果がレポートに含まれることを確認\n    - データ不足時のメッセージを確認\n\n\n    - _要件: AC-006_"
  status: done
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
- id: T9
  title: "Checkpoint - 統合機能のテスト確認\n  - 全てのテストがパスすることを確認\n  - ユーザーに質問があれば確認"
  status: done
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
- id: T10
  title: "ドキュメント更新\n  - [x] 10.1 README.mdを更新\n    - ディスク使用量予測機能の説明を追加\n    - 使用例を追加\n\
    \  \n  - [x] 10.2 CHANGELOG.mdを更新\n    - v1.16.0の変更内容を記載\n    - 新機能の説明\n    -\
    \ 関連する要件番号を記載"
  status: done
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
- id: T11
  title: "Final Checkpoint - 全テスト確認\n  - 全てのテストがパスすることを確認\n  - カバレッジが94%を達成（目標95%に近い）\n\
    \  - ユーザーに質問があれば確認\n  - _要件: AC-007_\n\n---\n\n## 注意事項\n\n- 各タスクは順番に実装してください\n\
    - プロパティテストは最低100回実行するように設定してください\n- エラーハンドリングは一貫性を保ってください\n- 既存のコードスタイルに従ってください\n\
    - コミットメッセージは日本語で記述してください\n\n## 完了条件"
  status: done
  priority: high
  estimated-hours: 2
  depends-on: []
  validates: []
